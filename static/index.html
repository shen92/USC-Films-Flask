<!DOCTYPE html>
<html>
  <head>
    <title>HW6</title>
    <style>
      html, body {
        height: 100%;
        max-width: 100%;
        margin: 0;
        font-family: Arial, Helvetica, sans-serif;
        color: red;
        background-color: black;
      }
      body {
        display: flex;
        flex-direction: column;
        overflow-x: hidden;
      }
      #header {
        display: flex;
        flex-direction: row;
        margin: 10px;
      }
      .headerTitle {
        font-size: 25px;
        font-weight: 700;
      }
      .headerGradient {
        flex: 1;
        background: linear-gradient(90deg, rgba(0,0,0,1) 40%, rgba(255,0,0,1) 100%);
      }
      #content {
        display: flex;
        flex: 1;
        flex-direction: row;
      }
      #sideBar {
        flex: 1;
        display: flex;
        border-right: 1px solid white;  
      }
      #homeTab {
        display: flex;
        border-bottom: 1px solid white;
        padding: 20px 10px;
        color: red;
        cursor: pointer;
      }
      #searchTab {
        display: flex;
        padding: 20px 10px;
        color: white;
        cursor: pointer;
      }
      #homePage {
        flex: 5;
        height: 100%;
        max-width: 100%;
        display: block;
        flex-direction: column;
      }
      #searchPage {
        flex: 5;
        height: 100%;
        max-width: 100%;
        display: none;
        flex-direction: column;
      }
      .homeCard {
        width: 80%;
        padding: 20px 0px 80px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .searchForm {
        width: 80%;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-left: 10px;
        background: linear-gradient(0deg, rgba(0,0,0,1) 0%, rgba(255,0,0,1) 100%);
      }
      .searchTitle {
        margin: 20px 0px;
        font-size: 25px;
        font-weight: 700;
        color: white;
      }
      .searchFormRow {
        width: 40%;
        display: flex;
        margin: 10px 0px;
      }
      .searchFormLabel {
        width: 80px;
        color: white;
      }
      .searchInput {
        height: 20px;
        flex: 1;
        border: none;
        border-radius: 5px;
      }
      .searchDropdown{
        height: 23px;
        flex: 0.4;
        border: none;
        border-radius: 5px;
      }
      .buttonRow {
        justify-content: center;
      }
      .searchButton {
        background-color: black;
        color: white;
        border: none;
        border-radius: 5px;
        padding: 10px 15px;
      }
      .searchButton:hover {
        background-color: darkred;
      }
      #searchPadding {
        margin-left: 10px;
        display: flex; 
        flex: 1;
      }
      #searchResults {
        display: none;
        width: 80%;
        margin-left: 10px;
        flex-direction: column;
      }
      .resultCard {   
        display: none;
        margin: 10px 0px;
      }
      .resultCardInfo {
        flex: 1;
        margin-left: 40px;
        color: white;
      }
      .resultTitle {
        margin: 25px 0px;
        font-weight: 700;
        font-size: 25px;
      }
      .resultDescription {
        margin: 20px 0px;
      }
      .showMoreButton {
        border: none;
        border-radius: 5px;
        padding: 10px;
        background-color: red;
        color: white;
      }
      .showMoreButton:hover {
        background-color: gray;
      }
      #notFound{
        margin-left: 10px;
        width: 80%;
        /* display: flex; */
        flex-direction: column;
        display: none; 
        flex: 1;
        color: white;
        align-items: center;
        justify-content: center;
      }
      #modalContainer {
        display: none;
        position: absolute;
        background-color: rgba(0, 0, 0, 0.8);
        width: 100%;
        height: 105%;
        z-index: 100;
        overflow-x: hidden;
        overflow-y: auto;
      }
      #modal {
        height: 2000px;
        width: 50%;
        margin: 5% auto;
        display: flex;
        background-color: #d0d0d0;
      }
      .modalPadding {
        flex: 1;
      }
      .modalMain {
        flex: 12;
      }
      .modalTitle {
        margin-top: 20px;
        color: black;
        font-size: 25px;
      }
      .modalYear {
        color: black;
      }
      .modalGenre {
        color: black;
      }
      .modalDescription {
        margin-top: 30px;
        color: black;
      }
      .modalSpokenLanguages {
        margin-top: 30px;
        color: black;
        font-style: italic;
      }
      .castRow {
        width: 100%;
        display: flex;
        justify-content: space-between;
        gap: 10px;
        margin-top: 20px;
      }
      .modalCastSlot {
        flex: 1;
        width: 25%;
        display: flex;
        flex-direction: column;
        align-items: center;
        color: black;
      }
      .modalCastName {
        width: 100%;
        height: 24px;
        vertical-align: middle;
        text-align: center;
        white-space: nowrap;
        overflow-x: hidden;
        text-overflow: ellipsis;

      }
      .modalCastAvatar {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      #footer {
        display: flex;
        flex-direction: column;
        margin: 10px 10px 0px 10px;
        padding: 15px 5px;
        background-color: Maroon;
        color: white;
        font-style:italic
      }
      #footer div{
        display: flex;
        flex-direction: row-reverse;
      }
    </style>
    
  </head>
  <body>
      <div id="modalContainer" class="disabledArea">
        <div id="modal">
          <div style="flex: 1;"></div>
          <div class="modalMain">
            <div style="margin-top: 25px;">
              <img id="modalPoster" src="" alt="Modal Poster">
            </div>
            <div id="modalTitle" class="modalTitle">{modalTitle}</div>
            <div style="margin-top: 20px; color: black;">
              <span id="modalYear" class="modalYear">{modalYear}</span><!--
              --><span> | </span><!--
              --><span id="modalGenre" class="modalGenre">{modalGenre}</span>
            </div>
            <div style="margin-top: 15px; color: black;">
              <span style="color:red">★</span>
              <span id="modalRate" style="color:red">{modalRate}</span><!--
              --><span style="color:red">/5</span>
              <span id="modalVote">{modalVote}</span>
              <span>votes</span>
            </div>
            <div id="modalDescription" class="modalDescription">
              {modalDescription}
            </div>
            <div class="modalSpokenLanguages">
              <span>Spoken languages:</span>
              <span id="modalSpokenLanguages">{modalSpokenLanguages}</span>
            </div>
            <div style="font-weight: 700; color: black; font-size: 20px; margin-top: 40px;">Cast</div>
            <div class="castContainer">
              <div class="castRow">

                <div id="modalCastSlot0" class="modalCastSlot">
                  <img id="modalCastAvatar0" class="modalCastAvatar" src="" alt="cast 0">
                  <div id="modalCastName0" 
                      style="font-weight: 700; margin-top: 10px"
                      class="modalCastName"
                  >
                    {modalCastName}
                  </div>
                  <div style="margin: 5px 0px">AS</div>
                  <div id="modalCastCharacterName0" 
                    class="modalCastName">
                    {modalCharacterName}
                  </div>
                </div>

                <div id="modalCastSlot1" class="modalCastSlot">
                  <img id="modalCastAvatar1" class="modalCastAvatar" src="" alt="cast 1">
                  <div id="modalCastName1" 
                      style="font-weight: 700; margin-top: 10px"
                      class="modalCastName"
                  >
                    {modalCastName}
                  </div>
                  <div style="margin: 5px 0px">AS</div>
                  <div id="modalCastCharacterName1" 
                    class="modalCastName">
                    {modalCharacterName}
                  </div>
                </div>

                <div id="modalCastSlot2" class="modalCastSlot">
                  <img id="modalCastAvatar2" class="modalCastAvatar" src="" alt="cast 2">
                  <div id="modalCastName2" 
                      style="font-weight: 700; margin-top: 10px"
                      class="modalCastName"
                  >
                    {modalCastName}
                  </div>
                  <div style="margin: 5px 0px">AS</div>
                  <div id="modalCastCharacterName2" 
                    class="modalCastName">
                    {modalCharacterName}
                  </div>
                </div>

                <div id="modalCastSlot3" class="modalCastSlot">
                  <img id="modalCastAvatar3" class="modalCastAvatar" src="" alt="cast 3">
                  <div id="modalCastName3" 
                      style="font-weight: 700; margin-top: 10px"
                      class="modalCastName"
                  >
                    {modalCastName}
                  </div>
                  <div style="margin: 5px 0px">AS</div>
                  <div id="modalCastCharacterName3" 
                    class="modalCastName">
                    {modalCharacterName}
                  </div>
                </div>

              </div>
              <div class="castRow">

                <div id="modalCastSlot4" class="modalCastSlot">
                  <img id="modalCastAvatar4" class="modalCastAvatar" src="" alt="cast 4">
                  <div id="modalCastName4" 
                      style="font-weight: 700; margin-top: 10px"
                      class="modalCastName"
                  >
                    {modalCastName}
                  </div>
                  <div style="margin: 5px 0px">AS</div>
                  <div id="modalCastCharacterName4" 
                    class="modalCastName">
                    {modalCharacterName}
                  </div>
                </div>

                <div id="modalCastSlot5" class="modalCastSlot">
                  <img id="modalCastAvatar5" class="modalCastAvatar" src="" alt="cast 5">
                  <div id="modalCastName5" 
                      style="font-weight: 700; margin-top: 10px"
                      class="modalCastName"
                  >
                    {modalCastName}
                  </div>
                  <div style="margin: 5px 0px">AS</div>
                  <div id="modalCastCharacterName5" 
                    class="modalCastName">
                    {modalCharacterName}
                  </div>
                </div>

                <div id="modalCastSlot6" class="modalCastSlot">
                  <img id="modalCastAvatar6" class="modalCastAvatar" src="" alt="cast 6">
                  <div id="modalCastName6" 
                      style="font-weight: 700; margin-top: 10px"
                      class="modalCastName"
                  >
                    {modalCastName}
                  </div>
                  <div style="margin: 5px 0px">AS</div>
                  <div id="modalCastCharacterName6" 
                    class="modalCastName">
                    {modalCharacterName}
                  </div>
                </div>

                <div id="modalCastSlot7" class="modalCastSlot">
                  <img id="modalCastAvatar7" class="modalCastAvatar" src="" alt="cast 7">
                  <div id="modalCastName7" 
                      style="font-weight: 700; margin-top: 10px"
                      class="modalCastName"
                  >
                    {modalCastName}
                  </div>
                  <div style="margin: 5px 0px">AS</div>
                  <div id="modalCastCharacterName7" 
                    class="modalCastName">
                    {modalCharacterName}
                  </div>
                </div>
                
              </div>
            </div>
            <div style="font-weight: 700; color: black; font-size: 20px; margin-top: 40px;">Review</div>
            <div class="reviewsContainer">
              <div id="modalReviewCard0" class="modalReviewCard">
                <div id="reviewRateSlot0">
                  <span id="reviewUsername0" class="reviewUsername">{reviewUsername}</span><!--
                  --><span> on </span><!--
                  --><span id="reviewDate0">{reviewDate}</span>
                </div>
                <div>
                  <span>star</span><!--
                  --><span id="reviewRate0">{reviewRate}</span><!--
                  --><span>/5</span>
                </div>
                <div id="reviewComment0">
                  {reviewComment}
                </div>
              </div>

              <div id="modalReviewCard1" class="modalReviewCard">
                <div id="reviewRateSlot1">
                  <span id="reviewUsername1" class="reviewUsername">{reviewUsername}</span><!--
                  --><span> on </span><!--
                  --><span id="reviewDate1">{reviewDate}</span>
                </div>
                <div>
                  <span>star</span><!--
                  --><span id="reviewRate1">{reviewRate}</span><!--
                  --><span>/5</span>
                </div>
                <div id="reviewComment1">
                  {reviewComment}
                </div>
              </div>

              <div id="modalReviewCard2" class="modalReviewCard">
                <div id="reviewRateSlot2">
                  <span id="reviewUsername2" class="reviewUsername">{reviewUsername}</span><!--
                  --><span> on </span><!--
                  --><span id="reviewDate2">{reviewDate}</span>
                </div>
                <div>
                  <span>star</span><!--
                  --><span id="reviewRate2">{reviewRate}</span><!--
                  --><span>/5</span>
                </div>
                <div id="reviewComment2">
                  {reviewComment}
                </div>
              </div>

              <div id="modalReviewCard3" class="modalReviewCard">
                <div id="reviewRateSlot3">
                  <span id="reviewUsername3" class="reviewUsername">{reviewUsername}</span><!--
                  --><span> on </span><!--
                  --><span id="reviewDate3">{reviewDate}</span>
                </div>
                <div>
                  <span>star</span><!--
                  --><span id="reviewRate3">{reviewRate}</span><!--
                  --><span>/5</span>
                </div>
                <div id="reviewComment3">
                  {reviewComment}
                </div>
              </div>

              <div id="modalReviewCard4" class="modalReviewCard">
                <div id="reviewRateSlot4">
                  <span id="reviewUsername4" class="reviewUsername">{reviewUsername}</span><!--
                  --><span> on </span><!--
                  --><span id="reviewDate4">{reviewDate}</span>
                </div>
                <div>
                  <span>star</span><!--
                  --><span id="reviewRate4">{reviewRate}</span><!--
                  --><span>/5</span>
                </div>
                <div id="reviewComment4">
                  {reviewComment}
                </div>
              </div>
            </div>
          </div>
          <div style="flex: 1;">
            <button onclick="onCloseModalButtonClick()">close</button>
          </div>
        </div>
      </div>
      <div id="header">
        <div class="headerTitle">THE MOVIE DB</div>
        <div style="flex: 1"></div>
        <div class="headerGradient"></div>
      </div>
      <div id=content>
          <div id="sideBar">
            <div style="flex: 1"></div>
            <div style="flex: 1">
              <div  id="homeTab" 
                  onclick="onHomeTabClick()" 
                  onmouseover="onHomeTabMouseOver()"
                  onmouseout="onHomeTabMouseOut()"
              >
                <div>Home</div>
                <div style="flex: 1"></div>
                <div>⟶</div>
              </div>
                <div  id="searchTab" 
                    onclick="onSearchTabClick()" 
                    onmouseover="onSearchTabMouseOver()"
                    onmouseout="onSearchTabMouseOut()"
                >
                <div>Search</div>
                <div style="flex: 1"></div>
                <div>⟶</div>
              </div>
            </div>
          </div>

          <div id="homePage">
            <div class="homeCard">
              <div style="color: white">Trending Movies</div>
              <div style="margin-top: 25px;">
                <img id="trendingMovieImage" src="" alt="loading"> 
              </div>
            </div>
            <div class="homeCard">
              <div style="color: white">TV Shows On-Air Today</div>
              <div style="margin-top: 25px;">
                <img id="trendingTVShowImage" src="" alt="loading"> 
              </div>
            </div>
            <div id="footer">
              <div>Designed and developed by Akansha, Pranav & Yash</div>
              <div>Powered by TMDB</div>
            </div>
          </div>

          <div id="searchPage">
            <div id="searchForm" 
                  class="searchForm"
            >
              <div class="searchTitle">Search</div>
              <div class="searchFormRow">
                <div class="searchFormLabel">Keyword<span style="color:red; font-style:italic">*</span></div>
                <input  id="searchInput" 
                        class="searchInput"
                        autocomplete="off" 
                        onchange="onSearchInputChange(this.value)"
                >
              </div>
              <div class="searchFormRow">
                <div class="searchFormLabel">Category<span style="color:red; font-style:italic">*</span></div>
                <select id="searchDropdown" 
                        class="searchDropdown"
                        onchange="onSearchDropdownChange(this.value)">
                  <option></option>
                  <option value="movie">Movies</option>
                  <option value="tv">TV Shows</option>
                  <option value="multi">Movies and TV Shows</option>
                </select>
            </div>
            <div class="searchFormRow buttonRow">
              <button class="searchButton"
                      onclick="onSearchButtonClick()"
              >
                Search
              </button>
              <div style="width: 60px;"></div>
              <button class="searchButton"
                      onclick="onClearButtonClick()"
              >
                Clear
              </button>
            </div>
            </div>

            <div id="notFound">
              <div style="flex: 1"></div>
              <div style="flex: 5">No results found.</div>
            </div>

            <div id="searchResults">
              <div id="searchResultsTitle"style="color: white; padding: 25px 0px">Showing results...</div>
              <div id="resultCard0" class="resultCard">
                <div style="background-color: red; width: 8px; margin-right: 8px"></div>
                <div >
                  <img id="resultPoster0" alt="poster0">
                </div>
                <div class="resultCardInfo">
                  <div id="resultTitle0" class="resultTitle">{resultTitle}</div>
                  <div>
                    <span id="resultYear0" class="resultYear">{resultYear}</span> |
                    <span id="resultGenre0">{resultGenre}</span>
                  </div>
                  <div>
                    <span style="color: red">★</span>
                    <span id="resultRate0" style="color: red;">{resultRate}</span><!--
                    --><span style="color: red;">/5</span> 
                    <span id="resultVote0">{resultVote}</span>
                    <span>votes</span>
                  </div>
                  <div id="resultDescription0" class="resultDescription">{resultDescription}</div>
                  <button class="showMoreButton"onclick="onShowMoreButtonClick(0)">Show more</button>
                </div>
              </div>
              <div id="resultCard1" class="resultCard">
                <div style="background-color: red; width: 8px; margin-right: 8px"></div>
                <div>
                  <img id="resultPoster1" alt="poster1">
                </div>
                <div class="resultCardInfo">
                  <div id="resultTitle1" class="resultTitle">{resultTitle}</div>
                  <div>
                    <span id="resultYear1" class="resultYear">{resultYear}</span> |
                    <span id="resultGenre1">{resultGenre}</span>
                  </div>
                  <div>
                    <span style="color: red">★</span>
                    <span id="resultRate1" style="color: red;">{resultRate}</span><!--
                    --><span style="color: red;">/5</span>
                    <span id="resultVote1">{vote}</span>
                    <span>votes</span>
                  </div>
                  <div id="resultDescription1" class="resultDescription">{resultDescription}</div>
                  <button class="showMoreButton"onclick="onShowMoreButtonClick(1)">Show more</button>
                </div>
              </div>
              <div id="resultCard2" class="resultCard">
                <div style="background-color: red; width: 8px; margin-right: 8px"></div>
                <div>
                  <img id="resultPoster2" alt="poster2">
                </div>
                <div class="resultCardInfo">
                  <div id="resultTitle2" class="resultTitle">{resultTitle}</div>
                  <div>
                    <span id="resultYear2" class="resultYear">{resultYear}</span> |
                    <span id="resultGenre2">{resultGenre}</span>
                  </div>
                  <div>
                    <span style="color: red">★</span>
                    <span id="resultRate2" style="color: red;">{resultRate}</span><!--
                    --><span style="color: red;">/5</span> 
                    <span id="resultVote2">{resultVote}</span>
                    <span>votes</span>
                  </div>
                  <div id="resultDescription2" class="resultDescription">{resultDescription}</div>
                  <button class="showMoreButton"onclick="onShowMoreButtonClick(2)">Show more</button>
                </div>
              </div>
              <div id="resultCard3" class="resultCard">
                <div style="background-color: red; width: 8px; margin-right: 8px"></div>
                <div>
                  <img id="resultPoster3" alt="poster3">
                </div>
                <div class="resultCardInfo">
                  <div id="resultTitle3" class="resultTitle">{resultTitle}</div>
                  <div>
                    <span id="resultYear3" class="resultYear">{resultYear}</span> |
                    <span id="resultGenre3">{resultGenre}</span>
                  </div>
                  <div>
                    <span style="color: red">★</span>
                    <span id="resultRate3" style="color: red;">{resultRate}</span><!--
                    --><span style="color: red;">/5</span>
                    <span id="resultVote3">{resultVote}</span>
                    <span>votes</span>
                  </div>
                  <div id="resultDescription3" class="resultDescription">{resultDescription}</div>
                  <button class="showMoreButton"onclick="onShowMoreButtonClick(3)">Show more</button>
                </div>
              </div>
              <div id="resultCard4" class="resultCard">
                <div style="background-color: red; width: 8px; margin-right: 8px"></div>
                <div>
                  <img id="resultPoster4" alt="poster4">
                </div>
                <div class="resultCardInfo">
                  <div id="resultTitle4" class="resultTitle">{resultTitle}</div>
                  <div>
                    <span id="resultYear4" class="resultYear">{resultYear}</span> |
                    <span id="resultGenre4">{resultGenre}</span>
                  </div>
                  <div>
                    <span style="color: red">★</span>
                    <span id="resultRate4" style="color: red;">{resultRate}</span><!--
                    --><span style="color: red;">/5</span>
                    <span id="resultVote4">{resultVote}</span>
                    <span>votes</span>
                  </div>
                  <div id="resultDescription4" class="resultDescription">{resultDescription}</div>
                  <button class="showMoreButton"onclick="onShowMoreButtonClick(4)">Show more</button>
                </div>
              </div>
              <div id="resultCard5" class="resultCard">
                <div style="background-color: red; width: 8px; margin-right: 8px"></div>
                <div>
                  <img id="resultPoster5" alt="poster5">
                </div>
                <div class="resultCardInfo">
                  <div id="resultTitle5" class="resultTitle">{resultTitle}</div>
                  <div>
                    <span id="resultYear5" class="resultYear">{resultYear}</span> |
                    <span id="resultGenre5">{resultGenre}</span>
                  </div>
                  <div>
                    <span style="color: red">★</span>
                    <span id="resultRate5" style="color: red;">{resultRate}</span><!--
                    --><span style="color: red;">/5</span>
                    <span id="resultVote5">{resultVote}</span>
                    <span>votes</span>
                  </div>
                  <div id="resultDescription5" class="resultDescription">{resultDescription}</div>
                  <button class="showMoreButton"onclick="onShowMoreButtonClick(5)">Show more</button>
                </div>
              </div>
              <div id="resultCard6" class="resultCard">
                <div style="background-color: red; width: 8px; margin-right: 8px"></div>
                <div>
                  <img id="resultPoster6" alt="poster6">
                </div>
                <div class="resultCardInfo">
                  <div id="resultTitle6" class="resultTitle">{resultTitle}</div>
                  <div>
                    <span id="resultYear6" class="resultYear">{resultYear}</span> |
                    <span id="resultGenre6">{resultGenre}</span>
                  </div>
                  <div>
                    <span style="color: red">★</span>
                    <span id="resultRate6" style="color: red;">{resultRate}</span><!--
                    --><span style="color: red;">/5</span>
                    <span id="resultVote6">{resultVote}</span>
                    <span>votes</span>
                  </div>
                  <div id="resultDescription6" class="resultDescription">{resultDescription}</div>
                  <button class="showMoreButton"onclick="onShowMoreButtonClick(6)">Show more</button>
                </div>
              </div>
              <div id="resultCard7" class="resultCard">
                <div style="background-color: red; width: 8px; margin-right: 8px"></div>
                <div>
                  <img id="resultPoster7" alt="poster7">
                </div>
                <div class="resultCardInfo">
                  <div id="resultTitle7" class="resultTitle">{resultTitle}</div>
                  <div>
                    <span id="resultYear7" class="resultYear">{resultYear}</span> |
                    <span id="resultGenre7">{resultGenre}</span>
                  </div>
                  <div>
                    <span style="color: red">★</span>
                    <span id="resultRate7" style="color: red;">{resultRate}</span><!--
                    --><span style="color: red;">/5</span>
                    <span id="resultVote7">{resultVote}</span>
                    <span>votes</span>
                  </div>
                  <div id="resultDescription7" class="resultDescription">{resultDescription}</div>
                  <button class="showMoreButton"onclick="onShowMoreButtonClick(7)">Show more</button>
                </div>
              </div>
              <div id="resultCard8" class="resultCard">
                <div style="background-color: red; width: 8px; margin-right: 8px"></div>
                <div>
                  <img id="resultPoster8" alt="poster8">
                </div>
                <div class="resultCardInfo">
                  <div id="resultTitle8" class="resultTitle">{resultTitle}</div>
                  <div>
                    <span id="resultYear8" class="resultYear">{resultYear}</span> |
                    <span id="resultGenre8">{resultGenre}</span>
                  </div>
                  <div>
                    <span style="color: red">★</span>
                    <span id="resultRate8" style="color: red;">{resultRate}</span><!--
                    --><span style="color: red;">/5</span>
                    <span id="resultVote8">{resultVote}</span>
                    <span>votes</span>
                  </div>
                  <div id="resultDescription8" class="resultDescription">{resultDescription}</div>
                  <button class="showMoreButton"onclick="onShowMoreButtonClick(8)">Show more</button>
                </div>
              </div>
              <div id="resultCard9" class="resultCard">
                <div style="background-color: red; width: 8px; margin-right: 8px"></div>
                <div>
                  <img id="resultPoster9" alt="poster9">
                </div>
                <div class="resultCardInfo">
                  <div id="resultTitle9" class="resultTitle">{resultTitle}</div>
                  <div>
                    <span id="resultYear9" class="resultYear">{resultYear}</span> |
                    <span id="resultGenre9">{resultGenre}</span>
                  </div>
                  <div>
                    <span style="color: red">★</span>
                    <span id="resultRate9" style="color: red;">{resultRate}</span><!--
                    --><span style="color: red;">/5</span> 
                    <span id="resultVote9">{resultVote}</span>
                    <span>votes</span>
                  </div>
                  <div id="resultDescription9" class="resultDescription">{resultDescription}</div>
                  <button class="showMoreButton"onclick="onShowMoreButtonClick(9)">Show more</button>
                </div>
              </div>
            </div>

            <div id="searchPadding"></div>

            <div id="footer">
              <div>Designed and developed by Akansha, Pranav & Yash</div>
              <div>Powered by TMDB</div>
            </div>
          </div>

      </div>
     <script>
       //Node References
       const homeTab = document.getElementById("homeTab");
       const searchTab = document.getElementById("searchTab");
       const homePage = document.getElementById("homePage");
       const searchPage = document.getElementById("searchPage");
       const trendingMovieImage = document.getElementById("trendingMovieImage");
       const trendingTVShowImage = document.getElementById("trendingTVShowImage");
       const searchInput = document.getElementById("searchInput");
       const searchDropdown = document.getElementById("searchDropdown");
       const notFound = document.getElementById("notFound");
       const searchResults = document.getElementById("searchResults");
       const searchResultsTitle = document.getElementById("searchResultsTitle");
       const modalContainer = document.getElementById('modalContainer')
       let searchResultCards = [];
       for(let i = 0; i < 10; i++){
         searchResultCards.push(document.getElementById(`resultCard${i}`))
       }
       let resultPosters = [];
       for(let i = 0; i < 10; i++){
         resultPosters.push(document.getElementById(`resultPoster${i}`))
       }
       let resultTitles = [];
       for(let i = 0; i < 10; i++){
        resultTitles.push(document.getElementById(`resultTitle${i}`))
       }
       let resultYears = [];
       for(let i = 0; i < 10; i++){
        resultYears.push(document.getElementById(`resultYear${i}`))
       }
       let resultGenres = [];
       for(let i = 0; i < 10; i++){
        resultGenres.push(document.getElementById(`resultGenre${i}`))
       }
       let resultRates = [];
       for(let i = 0; i < 10; i++){
        resultRates.push(document.getElementById(`resultRate${i}`))
       }
       let resultVotes = [];
       for(let i = 0; i < 10; i++){
        resultVotes.push(document.getElementById(`resultVote${i}`))
       }
       let resultDescriptions = [];
       for(let i = 0; i < 10; i++){
        resultDescriptions.push(document.getElementById(`resultDescription${i}`))
       }
       const modalPoster = document.getElementById('modalPoster');
       const modalTitle = document.getElementById('modalTitle');
       const modalYear = document.getElementById('modalYear');
       const modalGenre = document.getElementById('modalGenre');
       const modalRate = document.getElementById('modalRate');
       const modalVote = document.getElementById('modalVote');
       const modalDescription = document.getElementById('modalDescription');
       const modalSpokenLanguages = document.getElementById('modalSpokenLanguages');
       let modalCastSlots = [];
       for(let i = 0; i < 8; i++){
         modalCastSlots.push(document.getElementById(`modalCastSlot${i}`));
       }
       let modalCastAvatars = [];
       for(let i = 0; i < 8; i++){
        modalCastAvatars.push(document.getElementById(`modalCastAvatar${i}`));
       }
       let modalCastNames = [];
       for(let i = 0; i < 8; i++){
        modalCastNames.push(document.getElementById(`modalCastName${i}`));
       }
       let modalCastCharacterNames = [];
       for(let i = 0; i < 8; i++){
        modalCastCharacterNames.push(document.getElementById(`modalCastCharacterName${i}`));
       }

       //reviews
       let modalReviewCards = [];
       let reviewRateSlots = [];
       let reviewUsernames =[];
       for(let i = 0; i < 5; i++){
        reviewUsernames.push(document.getElementById(`reviewUsername${i}`));
       }
       let reviewDates = [];
       for(let i = 0; i < 5; i++){
        reviewDates.push(document.getElementById(`reviewDate${i}`));
       }
       let reviewRates = [];
       for(let i = 0; i < 5; i++){
        reviewRates.push(document.getElementById(`reviewRate${i}`));
       }
       let reviewComments = [];
       for(let i = 0; i < 5; i++){
        reviewComments.push(document.getElementById(`reviewComment${i}`));
       }

      //Configs
      //const BASE_URL = "https://shen92moviedb.azurewebsites.net" //Production server
      const BASE_URL = 'http://localhost:5000'  //Dev server
      const BASE_URL_IMG = 'https://image.tmdb.org/t/p'
      let state = {
        tab: "home",
        homeMovies: [],
        homeTVShows: [],
        //TODO: RESET BEFORE SUBMIT
        keyword: "avengers",
        category: "movie",
        queryResults: [],
        movieGenres: [],
        tvGenres:[],
        targetMediaIndex: -1,
        modalOpen: false,
        modalMediaDetails: {},
        modalCasts: [],
        modalReviews: [],
       }
      
      //Event Handlers
      const onHomeTabClick = () =>{
        state.tab = "home";
        homeTab.style.color = 'red';
        homePage.style.display = 'flex';
        searchTab.style.color = 'white';
        searchPage.style.display = 'none';
        renderHomePage();
      }

      const onHomeTabMouseOver = () => {
        homeTab.style.color = 'red';
      }

      const onHomeTabMouseOut = () => {
        homeTab.style.color = state.tab === 'home' ? 'red' : 'white';
      }

      const onSearchTabClick = () =>{
        state.tab = "search";
        homeTab.style.color = 'white';
        homePage.style.display = 'none';
        searchTab.style.color = 'red';
        searchPage.style.display = 'flex';
      }

      const onSearchTabMouseOver = () => {
        searchTab.style.color = "red";
      }

      const onSearchTabMouseOut = () => {
        searchTab.style.color = state.tab === 'search' ? 'red' : 'white';
      }

      const onSearchInputChange = (keyword) => {
        const keywords = validateInput(keyword).split(' ').join('%20');
        state.keyword = keywords;
      }

      const onSearchDropdownChange = (category) => {
        state.category = category;
      }

      const onSearchButtonClick = async() => {
        // if(state.keyword === "" || state.category === ""){
        //   alert("Please enter valid values");
        //   return;
        // }
        const queryResults = await fetchQueryResults();
        state.queryResults = queryResults.data;
        await renderQueryResults();
        //console.log(state.queryResults);
      }

      const onClearButtonClick = () => {
        state.keyword ="";
        state.category = "";
        state.queryResults = [];
        searchInput.value = "";
        searchDropdown.selectedIndex = -1;
        //TODO: clear query results
        searchResults.style.display = "none";

      }

      const onShowMoreButtonClick = async(index) => {
        state.modalOpen = true;
        state.targetMediaIndex = index;
        modalContainer.style.display = 'block';
        document.documentElement.style.overflow = "hidden";
        
        if(state.targetMediaIndex >= 0 && state.targetMediaIndex <= 9){
          const targetMedia = state.queryResults[state.targetMediaIndex];
          if(targetMedia != null){
            const modalMediaDetails = await fetchResultDetails(targetMedia.media_type, targetMedia.id);
            state.modalMediaDetails = modalMediaDetails.data;
            const modalCasts = await fetchCasts(targetMedia.media_type, targetMedia.id);
            state.modalCasts = modalCasts.data;
            // const modalReviews = await fetchReviews(targetMedia.media_type, targetMedia.id);
            // state.modalReviews = modalReviews;
          }
        }
        renderModal();
      }

      const onCloseModalButtonClick = () => {
        state.modalOpen = false;
        modalContainer.style.display = 'none';
        document.documentElement.style.overflowX = "hidden";
        document.documentElement.style.overflowY = "auto";
      }
      
      //Helper Functions
      const validateInput = (keyword) => {
        return validKeyword = keyword.replace(/[^a-zA-Z0-9- _]/g, '').replace(/\s+/g, ' ').trim();
      }
      
      const getTitle = (media) => {
        if(media == null) return  "Not Available";
        return media.media_type === 'movie' ? 
          (!media.hasOwnProperty('title') || media.title == null || media.title.length === 0 ? 
            "Not Available" : media.title) : 
          (!media.hasOwnProperty('name') || media.name == null || media.name.length === 0 ? 
            "Not Available" : media.name);
      }
      
      const getYear = (media) => {
        if(media == null) return  "Not Available";
        return media.media_type === 'movie' ? 
            (!media.hasOwnProperty('release_date') || media.release_date == null || media.release_date.length === 0 ? 
              "Not Available" : media.release_date.substring(0,4)) : 
            (!media.hasOwnProperty('first_air_date') || media.first_air_date == null || media.first_air_date.length === 0? 
              "Not Available" : media.first_air_date.substring(0,4));
      }

      const getGenres = (media) => {
        if(media == null) return  "";

        let result = [];
        if(media.hasOwnProperty('genre_ids')){
          if(media.genre_ids == null || media.genre_ids.length === 0)
            return "";
          media.media_type === "movie" ? 
          (media.genre_ids.forEach(genreId => {
            const genre = state.movieGenres.find(genre => genre.id === genreId);
            if(genre != null) result.push(genre.name);
          })) : 
          (media.genre_ids.forEach(genreId => {
            const genre = state.tvGenres.find(genre => genre.id === genreId);
            if(genre != null) result.push(genre.name) ;
          }))
        }else if(media.hasOwnProperty('genres')){
          if(media.genres == null || media.genres.length === 0)
            return "";
          result = media.genres.map(genre => {
            if(genre != null && genre.hasOwnProperty('name') && 
                genre.name != null && genre.name.length > 0)
              return genre.name
          })
        }
        return result.join(', '); 
      } 

      const getRates = (media) => {
        if(media == null) return "";
        return !media.hasOwnProperty('vote_average') || media.vote_average == null ? 
          "0.0" : keepTwoDecimal(media.vote_average / 2);
      }

      const getVotes = (media) => {
        if(media == null) return "";
        return !media.hasOwnProperty('vote_count') || media.vote_count == null ?
          0: media.vote_count;
      }

      const getDescription = (media) => {
        if(media == null) return "";
        return !media.hasOwnProperty('overview') || media.overview == null || media.overview.length === 0 ?   "" : media.overview;
      }

      const getSpokenLanguages = (media) => {
        if(media == null || 
          !(media.hasOwnProperty("spoken_languages") || media.hasOwnProperty("spoken languages"))
        ) 
          return "";
        const spokenLanguages = media["spoken_languages"] || media["spoken languages"];
        if(spokenLanguages == null || spokenLanguages.length === 0) return "";
        const result = spokenLanguages.map(spokenLanguage => {
          if(spokenLanguage != null && spokenLanguage.hasOwnProperty('english_name') && 
              spokenLanguage.english_name != null && spokenLanguage.english_name.length !== 0)
            return spokenLanguage.english_name;
        });
        return result.join(', ');
      }

      const getName = (cast) => {
        if(cast == null) return "";
        return !cast.hasOwnProperty('name') || cast.name == null || cast.name.length === 0 ? 
          "" : cast.name;
      }

      const getCharacterName = (cast) => {
        if(cast == null) return "";
        return !cast.hasOwnProperty('character') || cast.character == null || cast.character.length === 0 ?
          "" : cast.character;
      }

      const keepTwoDecimal = (num) => {  
        let result = parseFloat(num);  
        if (isNaN(result)) {   
          return 0.0;  
        }  
        result = Math.round(num * 100) / 100;  
        if(Number.isInteger(result))
          return `${result}.0`
        return result;  
      }

      //API Calls
      const fetchHomeMovies = async() => {
        const requestOptions = {
          method: 'GET',
          redirect: 'follow'
        };
        try {
          const response = await fetch(`${BASE_URL}/home/movies`, requestOptions);
          return await response.json();
        } catch (error) {
          console.log('Request Failed', error);
        }
      }

      const fetchHomeTVShows = async() => {
        const requestOptions = {
          method: 'GET',
          redirect: 'follow'
        };
        try {
          const response = await fetch(`${BASE_URL}/home/tvshows`, requestOptions);
          return await response.json();
        } catch (error) {
          console.log('Request Failed', error);
        }
      }

      const fetchQueryResults = async() => {
        const requestOptions = {
          method: 'GET',
          redirect: 'follow',
        };
        try {
          const response = await fetch(`${BASE_URL}/search/${state.category}?keyword=${state.keyword}`, requestOptions);
          return await response.json();
        } catch (error) {
          console.log('Request Failed', error);
        }
      }
      
      const fetchGenres = async(mediaType="movie") => {
        const requestOptions = {
          method: 'GET',
          redirect: 'follow',
        };
        try {
          const response = await fetch(`${BASE_URL}/genres/${mediaType}`, requestOptions);
          return await response.json();
        } catch (error) {
          console.log('Request Failed', error);
        }
      }

      const fetchResultDetails = async(mediaType="movie", mediaId="") => {
        const requestOptions = {
          method: 'GET',
          redirect: 'follow',
        };
        try {
          if(mediaId === "" || mediaId.length === 0) return {};
          const response = await fetch(`${BASE_URL}/details/${mediaType}?id=${mediaId}`, requestOptions);
          return await response.json();
        } catch (error) {
          console.log('Request Failed', error);
        }
      }

      const fetchCasts = async(mediaType="movie", mediaId="") => {
        const requestOptions = {
          method: 'GET',
          redirect: 'follow',
        };
        try {
          if(mediaId === "" || mediaId.length === 0) return {};
          const response = await fetch(`${BASE_URL}/cast/${mediaType}?id=${mediaId}`, requestOptions);
          return await response.json();
        } catch (error) {
          console.log('Request Failed', error);
        }
      }

      const fetchReviews = async(mediaType="movie", mediaId="") => {
        const requestOptions = {
          method: 'GET',
          redirect: 'follow',
        };
        try {
          if(mediaId === "" || mediaId.length === 0) return {};
          const response = await fetch(`${BASE_URL}/reviews/${mediaType}?id=${mediaId}`, requestOptions);
          return await response.json();
        } catch (error) {
          console.log('Request Failed', error);
        }
      }

      //Render Functions
      const renderHomeMovieSlide = () =>{
        //TODO: SLIDER EFFECT + NULL CHECK
        trendingMovieImage.setAttribute("src", `${BASE_URL_IMG}/w780${state.homeMovies[0].backdrop_path}`);
      }

      const renderHomeTVShowSlide = () => {
        //TODO: SLIDER EFFECT + NULL CHECK
        trendingTVShowImage.setAttribute("src", `${BASE_URL_IMG}/w780${state.homeTVShows[0].backdrop_path}`)
      }

      const renderQueryResults = async() => {
        searchResults.style.display = "flex";
        searchResultCards.forEach((searchResultCard, index) => {
          const result = state.queryResults[index];
          searchResultCard.style.display = result == null ? 'none' : 'flex';
          resultPosters[index].setAttribute("src", result.poster_path == null ? 
          "img/movie_placeholder.png" :`${BASE_URL_IMG}/w185${result.poster_path}`)
          resultTitles[index].innerHTML = getTitle(result);
          resultYears[index].innerHTML = getYear(result);
          resultGenres[index].innerHTML = getGenres(result);
          resultRates[index].innerHTML = getRates(result);
          resultVotes[index].innerHTML = getVotes(result);
          resultDescriptions[index].innerHTML = getDescription(result);
        })
      }

      const renderModal = () => {
        const modalMediaDetails = state.modalMediaDetails;
        const modalCasts = state.modalCasts;
        const modalReviews = state.modalReviews;
        console.log(modalCasts)
        //console.log(modalReviews)

        modalPoster.setAttribute("src", 
          modalMediaDetails.backdrop_path == null ? 
            "img/movie-placeholder.jpg" :
            `${BASE_URL_IMG}/w780${modalMediaDetails.backdrop_path}`
          )
        modalTitle.innerHTML = getTitle(modalMediaDetails);
        modalYear.innerHTML = getYear(modalMediaDetails);
        modalGenre.innerHTML = getGenres(modalMediaDetails);
        modalRate.innerHTML = getRates(modalMediaDetails);
        modalVote.innerHTML = getVotes(modalMediaDetails);
        modalDescription.innerHTML = getDescription(modalMediaDetails);
        modalSpokenLanguages.innerHTML = getSpokenLanguages(modalMediaDetails);
        
        modalCasts.forEach((modalCast, index) => {
          modalCastSlots[index].style.display = modalCasts[index] == null ? 'none' : 'flex'
          modalCastAvatars[index].setAttribute("src", 
          modalCast.profile_path == null || modalCast.profile_path.length === 0 ? 
            "img/person-placeholder.png" :
            `${BASE_URL_IMG}/w185${modalCast.profile_path}`);
          modalCastNames[index].innerHTML = getName(modalCast);
          modalCastCharacterNames[index].innerHTML = getCharacterName(modalCast);
        })


        reviewUsernames.forEach((reviewUsername, index) => {
          reviewUsername.innerHTML = `fetch username${index} later`
        });
        reviewDates.forEach((reviewDate, index) => {
          reviewDate.innerHTML = `fetch date${index} later`
        });  
        reviewRates.forEach((reviewRate, index) => {
          reviewRate.innerHTML = `fetch rate${index} later`
        });
        reviewComments.forEach((reviewComment, index) => {
          reviewComment.innerHTML = `fetch comment${index} later`
        });

      }

      const renderHomePage = async() => {
        const homeMovies = await fetchHomeMovies();
        if(homeMovies.data.length !== 0){
          state.homeMovies = homeMovies.data;
        }
        const homeTVShows = await fetchHomeTVShows();
        if(homeTVShows.data.length !== 0){
          state.homeTVShows = homeTVShows.data;
        }
        if(state.movieGenres.length === 0){
          const movieGenres = await fetchGenres('movie')
          if(movieGenres.data.length !== 0){
            state.movieGenres = movieGenres.data;
          }
        }
        if(state.tvGenres.length === 0){
          const tvGenres = await fetchGenres('tv')
          if(tvGenres.data.length !== 0){
            state.tvGenres = tvGenres.data;
          }
        }
        renderHomeMovieSlide();
        renderHomeTVShowSlide();
      }

      const renderSearchPage = () => {
        searchDropdown.selectedIndex = -1;
      }

      renderHomePage();
      renderSearchPage();
    </script>
  </body>
</html>